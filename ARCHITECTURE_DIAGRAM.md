# Architecture Diagram - AI Audio Transcriber

## System Overview Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                    Chrome Browser Environment                   │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │
│  │   Tab 1     │  │   Tab 2     │  │   Tab N     │             │
│  │ (Audio)     │  │ (Audio)     │  │ (Audio)     │             │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘             │
│         │                │                │                    │
│         └────────────────┼────────────────┘                    │
│                          │                                     │
│  ┌──────────────────────┼─────────────────────────────────┐    │
│  │       Chrome Extension (Manifest V3)                   │    │
│  │                      │                                 │    │
│  │  ┌───────────────────▼──────────────────────────────┐  │    │
│  │  │           Service Worker                         │  │    │
│  │  │  ┌─────────────────────────────────────────────┐ │  │    │
│  │  │  │        Audio Stream Manager                 │ │  │    │
│  │  │  │  • Tab Audio Capture                       │ │  │    │
│  │  │  │  • Microphone Input                        │ │  │    │
│  │  │  │  • 30-second Chunking                      │ │  │    │
│  │  │  │  • 3-second Overlap                        │ │  │    │
│  │  │  └─────────────────────────────────────────────┘ │  │    │
│  │  └───────────────────┬──────────────────────────────┘  │    │
│  │                      │                                 │    │
│  │  ┌───────────────────▼──────────────────────────────┐  │    │
│  │  │              Side Panel UI                       │  │    │
│  │  │                                                  │  │    │
│  │  │  ┌─────────────────────────────────────────────┐ │  │    │
│  │  │  │            Main Controller                  │ │  │    │
│  │  │  │         (main.js)                          │ │  │    │
│  │  │  └─────────────────┬───────────────────────────┘ │  │    │
│  │  │                    │                             │  │    │
│  │  │  ┌─────────────────▼───────────────────────────┐ │  │    │
│  │  │  │         Functional Modules                  │ │  │    │
│  │  │  │                                             │ │  │    │
│  │  │  │  ┌─────────────┐  ┌─────────────────────┐   │ │  │    │
│  │  │  │  │Config Module│  │  State Manager      │   │ │  │    │
│  │  │  │  │(app-config) │  │  (functional state) │   │ │  │    │
│  │  │  │  └─────────────┘  └─────────────────────┘   │ │  │    │
│  │  │  │                                             │ │  │    │
│  │  │  │  ┌─────────────┐  ┌─────────────────────┐   │ │  │    │
│  │  │  │  │Storage Mgr  │  │  Settings Controller│   │ │  │    │
│  │  │  │  │(pure funcs) │  │  (functional UI)    │   │ │  │    │
│  │  │  │  └─────────────┘  └─────────────────────┘   │ │  │    │
│  │  │  │                                             │ │  │    │
│  │  │  │  ┌─────────────────────────────────────────┐ │ │  │    │
│  │  │  │  │        Utility Modules                  │ │ │  │    │
│  │  │  │  │  • DOM Utils (pure functions)           │ │ │  │    │
│  │  │  │  │  • Audio Utils (functional processing)  │ │ │  │    │
│  │  │  │  └─────────────────────────────────────────┘ │ │  │    │
│  │  │  └─────────────────┬───────────────────────────┘ │  │    │
│  │  └────────────────────┼─────────────────────────────┘  │    │
│  └───────────────────────┼────────────────────────────────┘    │
└──────────────────────────┼─────────────────────────────────────┘
                           │
  ┌────────────────────────▼─────────────────────────────┐
  │            Transcription Service Layer               │
  │                                                      │
  │  ┌─────────────────────────────────────────────────┐ │
  │  │          Transcription Manager                  │ │
  │  │         (functional composition)                │ │
  │  │                                                 │ │
  │  │  ┌─────────────┐  ┌─────────────────────────┐   │ │
  │  │  │Provider     │  │   Error Handling &      │   │ │
  │  │  │Abstraction  │  │   Retry Logic           │   │ │
  │  │  │(pure funcs) │  │   (functional patterns) │   │ │
  │  │  └─────────────┘  └─────────────────────────┘   │ │
  │  └─────────────────────────────────────────────────┘ │
  │                          │                           │
  │  ┌───────┬────────┬──────┼──────┬────────────────┐   │
  │  │       │        │      │      │                │   │
  │  ▼       ▼        ▼      ▼      ▼                │   │
  │ Google  OpenAI  Deepgram │  Fireworks AI        │   │
  │ Gemini  Whisper          │                      │   │
  │                          │                      │   │
  └──────────────────────────┼──────────────────────┘
                             │
  ┌──────────────────────────▼──────────────────────────┐
  │                External APIs                        │
  │                                                     │
  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────────┐ │
  │ │   Google    │ │   OpenAI    │ │    Deepgram    │ │
  │ │   Gemini    │ │   Whisper   │ │   & Fireworks  │ │
  │ │     API     │ │     API     │ │      APIs       │ │
  │ └─────────────┘ └─────────────┘ └─────────────────┘ │
  └─────────────────────────────────────────────────────┘
```

## Data Flow Diagram

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Browser   │    │   Audio     │    │   Chrome    │
│    Tabs     ├───►│   Capture   ├───►│  Extension  │
│  (Audio)    │    │  (30-sec)   │    │   (Main)    │
└─────────────┘    └─────────────┘    └──────┬──────┘
                                              │
┌─────────────┐    ┌─────────────┐           │
│ Microphone  │    │   Audio     │           │
│   Input     ├───►│   Mixing    ├───────────┘
│ (Optional)  │    │ (Combined)  │
└─────────────┘    └─────────────┘

                   ┌─────────────┐
                   │ Functional  │
                   │ Processing  │◄────────┐
                   │  Pipeline   │         │
                   └──────┬──────┘         │
                          │                │
                   ┌──────▼──────┐         │
                   │   State     │         │
                   │ Management  ├─────────┤
                   │(Immutable)  │         │
                   └──────┬──────┘         │
                          │                │
                   ┌──────▼──────┐         │
                   │Transcription│         │
                   │   Service   ├─────────┤
                   │ (Multi-API) │         │
                   └──────┬──────┘         │
                          │                │
              ┌───────────▼───────────┐    │
              │     External APIs     │    │
              │                       │    │
              │ ┌─────┐ ┌─────┐ ┌────┐│    │
              │ │ GEM ├─┤ OAI ├─┤ DG ││    │
              │ └─────┘ └─────┘ └────┘│    │
              └───────────┬───────────┘    │
                          │                │
                   ┌──────▼──────┐         │
                   │   Results   │         │
                   │ Processing  ├─────────┘
                   │(Functional) │
                   └──────┬──────┘
                          │
                   ┌──────▼──────┐
                   │     UI      │
                   │   Update    │
                   │ (DOM Utils) │
                   └─────────────┘
```

## Component Interaction Diagram

```
┌────────────────────────────────────────────────────────────────┐
│                    Extension Architecture                      │
│                                                                │
│  User Interface Layer (sidepanel.html + CSS)                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Recording Controls │ Settings Panel │ Results Display │   │
│  └─────────┬──────────────────┬──────────────────┬────────────┘   │
│            │                  │                  │                │
│  Application Layer (Functional JavaScript)                     │
│  ┌─────────▼──────────────────▼──────────────────▼────────────┐   │
│  │                   Main Controller                         │   │
│  │                    (main.js)                              │   │
│  └─────────┬──────────────────┬──────────────────┬────────────┘   │
│            │                  │                  │                │
│  ┌─────────▼─────┐  ┌─────────▼─────┐  ┌─────────▼─────────────┐   │
│  │ State Manager │  │Settings Ctrl  │  │ Transcription Svc   │   │
│  │(Functional)   │  │(Pure Functions)│  │(Multi-Provider)     │   │
│  └─────────┬─────┘  └─────────┬─────┘  └─────────┬─────────────┘   │
│            │                  │                  │                │
│  ┌─────────▼─────┐  ┌─────────▼─────┐  ┌─────────▼─────────────┐   │
│  │Storage Manager│  │  DOM Utils    │  │   Audio Utils       │   │
│  │(Pure Functions)│  │(Functional)   │  │(Audio Processing)   │   │
│  └───────────────┘  └───────────────┘  └─────────────────────────┘   │
│                                                                │
│  Configuration Layer                                          │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              App Config (Immutable)                     │   │
│  │  • Audio Settings  • API Providers  • UI Constants     │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                │
│  Browser Integration Layer                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  Service Worker │ Chrome APIs │ Tab Capture │ Storage   │   │
│  └─────────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────────┘

External Dependencies:
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Google    │    │   OpenAI    │    │ Deepgram/  │
│   Gemini    │    │   Whisper   │    │ Fireworks   │
└─────────────┘    └─────────────┘    └─────────────┘
```

## Build System Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    Development Environment                      │
│                                                                 │
│  Source Code (Functional JavaScript)                           │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  js/modules/  │  js/utils/  │  js/config/  │  main.js  │    │
│  └─────────┬───────────────────────────────────────────────┘    │
│            │                                                    │
│  ┌─────────▼───────────────────────────────────────────────┐    │
│  │                  Webpack 5                             │    │
│  │  • ES6+ Module Bundling                                │    │
│  │  • Tree Shaking (Functional Code Optimization)        │    │
│  │  • Babel Transpilation (Chrome 88+ Compatibility)     │    │
│  └─────────┬───────────────────────────────────────────────┘    │
│            │                                                    │
│  ┌─────────▼───────────────────────────────────────────────┐    │
│  │                   Terser                               │    │
│  │  • JavaScript Minification                             │    │
│  │  • Dead Code Elimination                               │    │
│  │  • Function Inlining                                   │    │
│  │  • 55% Size Reduction                                  │    │
│  └─────────┬───────────────────────────────────────────────┘    │
│            │                                                    │
│  ┌─────────▼───────────────────────────────────────────────┐    │
│  │              Production Build                           │    │
│  │  Source: ~90KB → Optimized: ~40KB                      │    │
│  └─────────┬───────────────────────────────────────────────┘    │
│            │                                                    │
│  ┌─────────▼───────────────────────────────────────────────┐    │
│  │            Automated Packaging                          │    │
│  │  • Zip File Creation                                    │    │
│  │  • Checksum Generation                                  │    │
│  │  • Release Notes                                        │    │
│  │  • Final Package: ~30KB                                │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                   GitHub Actions CI/CD                         │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │              build-and-release.yml                     │    │
│  │                                                         │    │
│  │  Trigger: Git tag (v*.*.*)                            │    │
│  │  ├─ Setup Node.js Environment                          │    │
│  │  ├─ Install Dependencies                               │    │
│  │  ├─ Run Production Build                               │    │
│  │  ├─ Create Distribution Package                        │    │
│  │  ├─ Generate Checksums                                 │    │
│  │  └─ Create GitHub Release                              │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
```

---

**Architecture Diagram Version**: 1.0
**Created**: August 22, 2025
**Extension Version**: v1.0.0

These diagrams represent the complete system architecture including component relationships, data flow, and build processes for the AI Audio Transcriber Chrome Extension.
